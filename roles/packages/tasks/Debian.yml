- apt: name={{ item }} state=present
  with_items:
    - shellcheck
    - silversearcher-ag
    - emacs
  become: true

- set_fact:
    from_url:
      - url: https://github.com/peco/peco/releases/download/v0.5.0/peco_linux_amd64.tar.gz
        dir: peco_linux_amd64
        bin: peco
      - url: https://github.com/github/hub/releases/download/v2.2.9/hub-linux-amd64-2.2.9.tgz
        dir: hub-linux-amd64-2.2.9/bin
        bin: hub
      - url: https://github.com/tidwall/jd/releases/download/0.3.1/jd-0.3.1-linux-amd64.tar.gz
        dir: jd-0.3.1-linux-amd64
        bin: jd

- unarchive: src={{ item.url }} dest="{{ lookup('env','HOME') }}/usr/local" remote_src=yes
  with_items: "{{ from_url }}"

- file: state=link src="{{ lookup('env','HOME') }}/usr/local/{{ item.dir }}/{{ item.bin }}" dest="{{ lookup('env','HOME') }}/usr/local/bin/{{ item.bin }}"
  with_items: "{{ from_url }}"
